package news.dao;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.ArrayList;

import step01.JsoupTest;

public class NewDAO {
	
	// 특정 부서 생성 : INSERT INTO dept VALUES (deptno, dname, loc);
		public static boolean intsertData() throws SQLException{
			Connection conn = null;
//				Statement stmt = null;
			PreparedStatement pstmt = null;
			
			
			
			try {
				// 1단계 
//					Class.forName("com.mysql.cj.jdbc.Driver");
				// 2단계
				conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/SCOTT?serverTimezone=Asia/Seoul", "SCOTT", "TIGER");
//					conn = DBUtill.getConnection();
				// 3단계 
				pstmt = conn.prepareStatement("INSERT INTO news VALUES (?, ?)");
				// 4단계
//				int result = pstmt.executeUpdate("INSERT INTO dept VALUES(" + JsoupTest.Titlesget()  + " , "
//																		   + JsoupTest.Linksget() + ")");
				
				ArrayList<String> titles = new ArrayList<String>();
				titles = JsoupTest.Titlesget();
				ArrayList<String> links = new ArrayList<String>();
				links = JsoupTest.Linksget();
				
				
				for (int i=0; i < titles.size(); i++) {
					
					pstmt.setString(1, titles.get(i));
					pstmt.setString(2, links.get(i));
					
				}

				
				int result = pstmt.executeUpdate();
				
				// 5단계
				if(result != 0) {
					return true;
				}
				// 6단계
			} finally {
				
				pstmt.close();
				conn.close();
			}
			
			return false;
		}
		
			
			
			
	
}
